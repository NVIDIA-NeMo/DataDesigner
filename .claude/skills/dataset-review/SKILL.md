---
name: dataset-review
description: Launch a browser-based review UI for inspecting and annotating synthetic dataset records. Use when the user wants to review generated data, annotate records as good/bad, or inspect LLM traces from a Data Designer preview run.
---

# Dataset Review

Review synthetic datasets generated by Data Designer in an interactive browser UI.

## Workflow

### 1. Save preview data to a file

After running a Data Designer preview, save the DataFrame:

```python
preview = designer.preview(config_builder)
preview.dataset.to_parquet("preview.parquet")
```

### 2. Launch the review UI

```bash
uv run --with data-designer data-designer review preview.parquet --open &
```

- `--open` auto-opens the browser
- `&` backgrounds the server so your shell isn't blocked
- The UI runs at http://127.0.0.1:8765

Tell the user: "I've opened the review UI in your browser. Review the records and annotate any that need improvement. Come back here when you're done."

### 3. Read annotations

When the user returns, read their feedback:

```python
import json
from pathlib import Path

annotations = json.loads(Path("preview_annotations.json").read_text())
```

The annotations file structure:

```json
{
  "source_file": "preview.parquet",
  "summary": {"good": 3, "bad": 2, "unreviewed": 5, "total": 10},
  "annotations": [
    {
      "row": 2,
      "rating": "bad",
      "column": "answer",
      "note": "Answer is factually wrong",
      "data": {"topic": "science", "question": "...", "answer": "..."}
    }
  ]
}
```

Key fields:
- `rating`: "good", "bad", or null
- `column`: which specific column is the problem (null if row-level)
- `note`: free-text explanation from the user
- `data`: the actual row values for context

### 4. Iterate

Use the annotations to guide edits:
- `column` field tells you which prompt/column to fix
- `note` tells you what's wrong
- `data` gives you the actual values for context

After editing the config and re-running preview, overwrite the parquet file and reload the UI:

```bash
curl -X POST http://127.0.0.1:8765/api/session/reload
```

The UI picks up the new data automatically.

### 5. Finish

When the user clicks "Finish Review" in the UI, the final annotations file is written. Read it and ask what to do next (iterate more or run a full `create` job).
