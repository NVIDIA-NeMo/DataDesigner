{
  "cells": [
    {
      "type": "markdown",
      "source": "# \ud83c\udfa8 Data Designer Tutorial: Generating Images\n\n#### \ud83d\udcda What you'll learn\n\nThis notebook shows how to generate synthetic image data with Data Designer using image-generation models.\n\n- \ud83d\uddbc\ufe0f **Image generation columns**: Add columns that produce images from text prompts\n- \ud83d\udcdd **Jinja2 prompts**: Drive diversity by referencing other columns in your prompt template\n- \ud83d\udcbe **Preview vs create**: Preview stores base64 in the dataframe; create saves images to disk and stores paths\n\nData Designer supports both **diffusion** (e.g. DALL\u00b7E, Stable Diffusion, Imagen) and **autoregressive** (e.g. Gemini image, GPT image) models.\n\n> **Prerequisites**: This tutorial uses [OpenRouter](https://openrouter.ai) with the Flux 2 Pro image model. Set `OPENROUTER_API_KEY` in your environment before running.\n\nIf this is your first time using Data Designer, we recommend starting with the [first notebook](https://nvidia-nemo.github.io/DataDesigner/latest/notebooks/1-the-basics/) in this tutorial series."
    },
    {
      "type": "markdown",
      "source": "### \ud83d\udce6 Import Data Designer\n\n- `data_designer.config` provides the configuration API.\n- `DataDesigner` is the main interface for generation."
    },
    {
      "type": "markdown",
      "source": "### \u26a1 Colab Setup\n\nRun the cells below to install the dependencies and set up the API key. If you don't have an API key, you can generate one from [build.nvidia.com](https://build.nvidia.com)."
    },
    {
      "type": "code",
      "source": "%%capture\n!pip install -U data-designer",
      "language": "python",
      "source_html": "<span style=\"color: #666\">%%</span>capture\n<span style=\"border: 1px solid #F00\">!</span>pip install <span style=\"color: #666\">-</span>U data<span style=\"color: #666\">-</span>designer\n"
    },
    {
      "type": "code",
      "source": "import getpass\nimport os\n\nfrom google.colab import userdata\n\ntry:\n    os.environ[\"NVIDIA_API_KEY\"] = userdata.get(\"NVIDIA_API_KEY\")\nexcept userdata.SecretNotFoundError:\n    os.environ[\"NVIDIA_API_KEY\"] = getpass.getpass(\"Enter your NVIDIA API key: \")",
      "language": "python",
      "source_html": "<span style=\"color: #007020; font-weight: bold\">import</span><span style=\"color: #BBB\"> </span><span style=\"color: #0E84B5; font-weight: bold\">getpass</span>\n<span style=\"color: #007020; font-weight: bold\">import</span><span style=\"color: #BBB\"> </span><span style=\"color: #0E84B5; font-weight: bold\">os</span>\n\n<span style=\"color: #007020; font-weight: bold\">from</span><span style=\"color: #BBB\"> </span><span style=\"color: #0E84B5; font-weight: bold\">google.colab</span><span style=\"color: #BBB\"> </span><span style=\"color: #007020; font-weight: bold\">import</span> userdata\n\n<span style=\"color: #007020; font-weight: bold\">try</span>:\n    os<span style=\"color: #666\">.</span>environ[<span style=\"color: #4070A0\">&quot;NVIDIA_API_KEY&quot;</span>] <span style=\"color: #666\">=</span> userdata<span style=\"color: #666\">.</span>get(<span style=\"color: #4070A0\">&quot;NVIDIA_API_KEY&quot;</span>)\n<span style=\"color: #007020; font-weight: bold\">except</span> userdata<span style=\"color: #666\">.</span>SecretNotFoundError:\n    os<span style=\"color: #666\">.</span>environ[<span style=\"color: #4070A0\">&quot;NVIDIA_API_KEY&quot;</span>] <span style=\"color: #666\">=</span> getpass<span style=\"color: #666\">.</span>getpass(<span style=\"color: #4070A0\">&quot;Enter your NVIDIA API key: &quot;</span>)\n"
    },
    {
      "type": "code",
      "source": "from IPython.display import Image as IPImage\nfrom IPython.display import display\n\nimport data_designer.config as dd\nfrom data_designer.interface import DataDesigner",
      "language": "python",
      "source_html": "<span style=\"color: #007020; font-weight: bold\">from</span><span style=\"color: #BBB\"> </span><span style=\"color: #0E84B5; font-weight: bold\">IPython.display</span><span style=\"color: #BBB\"> </span><span style=\"color: #007020; font-weight: bold\">import</span> Image <span style=\"color: #007020; font-weight: bold\">as</span> IPImage\n<span style=\"color: #007020; font-weight: bold\">from</span><span style=\"color: #BBB\"> </span><span style=\"color: #0E84B5; font-weight: bold\">IPython.display</span><span style=\"color: #BBB\"> </span><span style=\"color: #007020; font-weight: bold\">import</span> display\n\n<span style=\"color: #007020; font-weight: bold\">import</span><span style=\"color: #BBB\"> </span><span style=\"color: #0E84B5; font-weight: bold\">data_designer.config</span><span style=\"color: #BBB\"> </span><span style=\"color: #007020; font-weight: bold\">as</span><span style=\"color: #BBB\"> </span><span style=\"color: #0E84B5; font-weight: bold\">dd</span>\n<span style=\"color: #007020; font-weight: bold\">from</span><span style=\"color: #BBB\"> </span><span style=\"color: #0E84B5; font-weight: bold\">data_designer.interface</span><span style=\"color: #BBB\"> </span><span style=\"color: #007020; font-weight: bold\">import</span> DataDesigner\n"
    },
    {
      "type": "markdown",
      "source": "### \u2699\ufe0f Initialize the Data Designer interface\n\nWe initialize Data Designer without arguments here\u2014the image model is configured explicitly in the next cell. No default text model is needed for this tutorial."
    },
    {
      "type": "code",
      "source": "data_designer = DataDesigner()",
      "language": "python",
      "source_html": "data_designer <span style=\"color: #666\">=</span> DataDesigner()\n"
    },
    {
      "type": "markdown",
      "source": "### \ud83c\udf9b\ufe0f Define an image-generation model\n\n- Use `ImageInferenceParams` so Data Designer treats this model as an image generator.\n- Image options (size, quality, aspect ratio, etc.) are model-specific; pass them via `extra_body`."
    },
    {
      "type": "code",
      "source": "MODEL_PROVIDER = \"openrouter\"\nMODEL_ID = \"black-forest-labs/flux.2-pro\"\nMODEL_ALIAS = \"image-model\"\n\nmodel_configs = [\n    dd.ModelConfig(\n        alias=MODEL_ALIAS,\n        model=MODEL_ID,\n        provider=MODEL_PROVIDER,\n        inference_parameters=dd.ImageInferenceParams(\n            extra_body={\"height\": 512, \"width\": 512},\n        ),\n    )\n]",
      "language": "python",
      "source_html": "MODEL_PROVIDER <span style=\"color: #666\">=</span> <span style=\"color: #4070A0\">&quot;openrouter&quot;</span>\nMODEL_ID <span style=\"color: #666\">=</span> <span style=\"color: #4070A0\">&quot;black-forest-labs/flux.2-pro&quot;</span>\nMODEL_ALIAS <span style=\"color: #666\">=</span> <span style=\"color: #4070A0\">&quot;image-model&quot;</span>\n\nmodel_configs <span style=\"color: #666\">=</span> [\n    dd<span style=\"color: #666\">.</span>ModelConfig(\n        alias<span style=\"color: #666\">=</span>MODEL_ALIAS,\n        model<span style=\"color: #666\">=</span>MODEL_ID,\n        provider<span style=\"color: #666\">=</span>MODEL_PROVIDER,\n        inference_parameters<span style=\"color: #666\">=</span>dd<span style=\"color: #666\">.</span>ImageInferenceParams(\n            extra_body<span style=\"color: #666\">=</span>{<span style=\"color: #4070A0\">&quot;height&quot;</span>: <span style=\"color: #40A070\">512</span>, <span style=\"color: #4070A0\">&quot;width&quot;</span>: <span style=\"color: #40A070\">512</span>},\n        ),\n    )\n]\n"
    },
    {
      "type": "markdown",
      "source": "### \ud83c\udfd7\ufe0f Build the config: samplers + image column\n\nWe'll generate diverse **dog portrait** images: sampler columns drive subject (breed), age, style, look direction, and emotion. The image-generation column uses a Jinja2 prompt that references all of them."
    },
    {
      "type": "code",
      "source": "config_builder = dd.DataDesignerConfigBuilder(model_configs=model_configs)\n\nconfig_builder.add_column(\n    dd.SamplerColumnConfig(\n        name=\"style\",\n        sampler_type=dd.SamplerType.CATEGORY,\n        params=dd.CategorySamplerParams(\n            values=[\n                \"photorealistic\",\n                \"oil painting\",\n                \"watercolor\",\n                \"digital art\",\n                \"sketch\",\n                \"anime\",\n            ],\n        ),\n    )\n)\n\nconfig_builder.add_column(\n    dd.SamplerColumnConfig(\n        name=\"dog_breed\",\n        sampler_type=dd.SamplerType.CATEGORY,\n        params=dd.CategorySamplerParams(\n            values=[\n                \"a Golden Retriever\",\n                \"a German Shepherd\",\n                \"a Labrador Retriever\",\n                \"a Bulldog\",\n                \"a Beagle\",\n                \"a Poodle\",\n                \"a Corgi\",\n                \"a Siberian Husky\",\n                \"a Dalmatian\",\n                \"a Yorkshire Terrier\",\n                \"a Boxer\",\n                \"a Dachshund\",\n                \"a Doberman Pinscher\",\n                \"a Shih Tzu\",\n                \"a Chihuahua\",\n                \"a Border Collie\",\n                \"an Australian Shepherd\",\n                \"a Cocker Spaniel\",\n                \"a Maltese\",\n                \"a Pomeranian\",\n                \"a Saint Bernard\",\n                \"a Great Dane\",\n                \"an Akita\",\n                \"a Samoyed\",\n                \"a Boston Terrier\",\n            ],\n        ),\n    )\n)\n\nconfig_builder.add_column(\n    dd.SamplerColumnConfig(\n        name=\"cat_breed\",\n        sampler_type=dd.SamplerType.CATEGORY,\n        params=dd.CategorySamplerParams(\n            values=[\n                \"a Persian\",\n                \"a Maine Coon\",\n                \"a Siamese\",\n                \"a Ragdoll\",\n                \"a Bengal\",\n                \"an Abyssinian\",\n                \"a British Shorthair\",\n                \"a Sphynx\",\n                \"a Scottish Fold\",\n                \"a Russian Blue\",\n                \"a Birman\",\n                \"an Oriental Shorthair\",\n                \"a Norwegian Forest Cat\",\n                \"a Devon Rex\",\n                \"a Burmese\",\n                \"an Egyptian Mau\",\n                \"a Tonkinese\",\n                \"a Himalayan\",\n                \"a Savannah\",\n                \"a Chartreux\",\n                \"a Somali\",\n                \"a Manx\",\n                \"a Turkish Angora\",\n                \"a Balinese\",\n                \"an American Shorthair\",\n            ],\n        ),\n    )\n)\n\nconfig_builder.add_column(\n    dd.SamplerColumnConfig(\n        name=\"dog_age\",\n        sampler_type=dd.SamplerType.CATEGORY,\n        params=dd.CategorySamplerParams(\n            values=[\"1-3\", \"3-6\", \"6-9\", \"9-12\", \"12-15\"],\n        ),\n    )\n)\n\nconfig_builder.add_column(\n    dd.SamplerColumnConfig(\n        name=\"cat_age\",\n        sampler_type=dd.SamplerType.CATEGORY,\n        params=dd.CategorySamplerParams(\n            values=[\"1-3\", \"3-6\", \"6-9\", \"9-12\", \"12-18\"],\n        ),\n    )\n)\n\nconfig_builder.add_column(\n    dd.SamplerColumnConfig(\n        name=\"dog_look_direction\",\n        sampler_type=dd.SamplerType.CATEGORY,\n        params=dd.CategorySamplerParams(\n            values=[\"left\", \"right\", \"front\", \"up\", \"down\"],\n        ),\n    )\n)\n\nconfig_builder.add_column(\n    dd.SamplerColumnConfig(\n        name=\"cat_look_direction\",\n        sampler_type=dd.SamplerType.CATEGORY,\n        params=dd.CategorySamplerParams(\n            values=[\"left\", \"right\", \"front\", \"up\", \"down\"],\n        ),\n    )\n)\n\nconfig_builder.add_column(\n    dd.SamplerColumnConfig(\n        name=\"dog_emotion\",\n        sampler_type=dd.SamplerType.CATEGORY,\n        params=dd.CategorySamplerParams(\n            values=[\"happy\", \"curious\", \"serious\", \"sleepy\", \"excited\"],\n        ),\n    )\n)\n\nconfig_builder.add_column(\n    dd.SamplerColumnConfig(\n        name=\"cat_emotion\",\n        sampler_type=dd.SamplerType.CATEGORY,\n        params=dd.CategorySamplerParams(\n            values=[\"aloof\", \"curious\", \"content\", \"sleepy\", \"playful\"],\n        ),\n    )\n)\n\nconfig_builder.add_column(\n    dd.ImageColumnConfig(\n        name=\"generated_image\",\n        prompt=(\n            \"\"\"\nA {{ style }} family pet portrait of a {{ dog_breed }} dog of {{ dog_age }} years old looking {{dog_look_direction}} with an {{ dog_emotion }} expression and\n{{ cat_breed }} cat of {{ cat_age }} years old looking {{ cat_look_direction }} with an {{ cat_emotion }} expression in the background. Both subjects should be in focus.\n        \"\"\"\n        ),\n        model_alias=MODEL_ALIAS,\n    )\n)\n\ndata_designer.validate(config_builder)",
      "language": "python",
      "source_html": "config_builder <span style=\"color: #666\">=</span> dd<span style=\"color: #666\">.</span>DataDesignerConfigBuilder(model_configs<span style=\"color: #666\">=</span>model_configs)\n\nconfig_builder<span style=\"color: #666\">.</span>add_column(\n    dd<span style=\"color: #666\">.</span>SamplerColumnConfig(\n        name<span style=\"color: #666\">=</span><span style=\"color: #4070A0\">&quot;style&quot;</span>,\n        sampler_type<span style=\"color: #666\">=</span>dd<span style=\"color: #666\">.</span>SamplerType<span style=\"color: #666\">.</span>CATEGORY,\n        params<span style=\"color: #666\">=</span>dd<span style=\"color: #666\">.</span>CategorySamplerParams(\n            values<span style=\"color: #666\">=</span>[\n                <span style=\"color: #4070A0\">&quot;photorealistic&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;oil painting&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;watercolor&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;digital art&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;sketch&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;anime&quot;</span>,\n            ],\n        ),\n    )\n)\n\nconfig_builder<span style=\"color: #666\">.</span>add_column(\n    dd<span style=\"color: #666\">.</span>SamplerColumnConfig(\n        name<span style=\"color: #666\">=</span><span style=\"color: #4070A0\">&quot;dog_breed&quot;</span>,\n        sampler_type<span style=\"color: #666\">=</span>dd<span style=\"color: #666\">.</span>SamplerType<span style=\"color: #666\">.</span>CATEGORY,\n        params<span style=\"color: #666\">=</span>dd<span style=\"color: #666\">.</span>CategorySamplerParams(\n            values<span style=\"color: #666\">=</span>[\n                <span style=\"color: #4070A0\">&quot;a Golden Retriever&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a German Shepherd&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Labrador Retriever&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Bulldog&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Beagle&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Poodle&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Corgi&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Siberian Husky&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Dalmatian&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Yorkshire Terrier&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Boxer&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Dachshund&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Doberman Pinscher&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Shih Tzu&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Chihuahua&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Border Collie&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;an Australian Shepherd&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Cocker Spaniel&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Maltese&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Pomeranian&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Saint Bernard&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Great Dane&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;an Akita&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Samoyed&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Boston Terrier&quot;</span>,\n            ],\n        ),\n    )\n)\n\nconfig_builder<span style=\"color: #666\">.</span>add_column(\n    dd<span style=\"color: #666\">.</span>SamplerColumnConfig(\n        name<span style=\"color: #666\">=</span><span style=\"color: #4070A0\">&quot;cat_breed&quot;</span>,\n        sampler_type<span style=\"color: #666\">=</span>dd<span style=\"color: #666\">.</span>SamplerType<span style=\"color: #666\">.</span>CATEGORY,\n        params<span style=\"color: #666\">=</span>dd<span style=\"color: #666\">.</span>CategorySamplerParams(\n            values<span style=\"color: #666\">=</span>[\n                <span style=\"color: #4070A0\">&quot;a Persian&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Maine Coon&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Siamese&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Ragdoll&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Bengal&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;an Abyssinian&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a British Shorthair&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Sphynx&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Scottish Fold&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Russian Blue&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Birman&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;an Oriental Shorthair&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Norwegian Forest Cat&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Devon Rex&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Burmese&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;an Egyptian Mau&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Tonkinese&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Himalayan&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Savannah&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Chartreux&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Somali&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Manx&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Turkish Angora&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;a Balinese&quot;</span>,\n                <span style=\"color: #4070A0\">&quot;an American Shorthair&quot;</span>,\n            ],\n        ),\n    )\n)\n\nconfig_builder<span style=\"color: #666\">.</span>add_column(\n    dd<span style=\"color: #666\">.</span>SamplerColumnConfig(\n        name<span style=\"color: #666\">=</span><span style=\"color: #4070A0\">&quot;dog_age&quot;</span>,\n        sampler_type<span style=\"color: #666\">=</span>dd<span style=\"color: #666\">.</span>SamplerType<span style=\"color: #666\">.</span>CATEGORY,\n        params<span style=\"color: #666\">=</span>dd<span style=\"color: #666\">.</span>CategorySamplerParams(\n            values<span style=\"color: #666\">=</span>[<span style=\"color: #4070A0\">&quot;1-3&quot;</span>, <span style=\"color: #4070A0\">&quot;3-6&quot;</span>, <span style=\"color: #4070A0\">&quot;6-9&quot;</span>, <span style=\"color: #4070A0\">&quot;9-12&quot;</span>, <span style=\"color: #4070A0\">&quot;12-15&quot;</span>],\n        ),\n    )\n)\n\nconfig_builder<span style=\"color: #666\">.</span>add_column(\n    dd<span style=\"color: #666\">.</span>SamplerColumnConfig(\n        name<span style=\"color: #666\">=</span><span style=\"color: #4070A0\">&quot;cat_age&quot;</span>,\n        sampler_type<span style=\"color: #666\">=</span>dd<span style=\"color: #666\">.</span>SamplerType<span style=\"color: #666\">.</span>CATEGORY,\n        params<span style=\"color: #666\">=</span>dd<span style=\"color: #666\">.</span>CategorySamplerParams(\n            values<span style=\"color: #666\">=</span>[<span style=\"color: #4070A0\">&quot;1-3&quot;</span>, <span style=\"color: #4070A0\">&quot;3-6&quot;</span>, <span style=\"color: #4070A0\">&quot;6-9&quot;</span>, <span style=\"color: #4070A0\">&quot;9-12&quot;</span>, <span style=\"color: #4070A0\">&quot;12-18&quot;</span>],\n        ),\n    )\n)\n\nconfig_builder<span style=\"color: #666\">.</span>add_column(\n    dd<span style=\"color: #666\">.</span>SamplerColumnConfig(\n        name<span style=\"color: #666\">=</span><span style=\"color: #4070A0\">&quot;dog_look_direction&quot;</span>,\n        sampler_type<span style=\"color: #666\">=</span>dd<span style=\"color: #666\">.</span>SamplerType<span style=\"color: #666\">.</span>CATEGORY,\n        params<span style=\"color: #666\">=</span>dd<span style=\"color: #666\">.</span>CategorySamplerParams(\n            values<span style=\"color: #666\">=</span>[<span style=\"color: #4070A0\">&quot;left&quot;</span>, <span style=\"color: #4070A0\">&quot;right&quot;</span>, <span style=\"color: #4070A0\">&quot;front&quot;</span>, <span style=\"color: #4070A0\">&quot;up&quot;</span>, <span style=\"color: #4070A0\">&quot;down&quot;</span>],\n        ),\n    )\n)\n\nconfig_builder<span style=\"color: #666\">.</span>add_column(\n    dd<span style=\"color: #666\">.</span>SamplerColumnConfig(\n        name<span style=\"color: #666\">=</span><span style=\"color: #4070A0\">&quot;cat_look_direction&quot;</span>,\n        sampler_type<span style=\"color: #666\">=</span>dd<span style=\"color: #666\">.</span>SamplerType<span style=\"color: #666\">.</span>CATEGORY,\n        params<span style=\"color: #666\">=</span>dd<span style=\"color: #666\">.</span>CategorySamplerParams(\n            values<span style=\"color: #666\">=</span>[<span style=\"color: #4070A0\">&quot;left&quot;</span>, <span style=\"color: #4070A0\">&quot;right&quot;</span>, <span style=\"color: #4070A0\">&quot;front&quot;</span>, <span style=\"color: #4070A0\">&quot;up&quot;</span>, <span style=\"color: #4070A0\">&quot;down&quot;</span>],\n        ),\n    )\n)\n\nconfig_builder<span style=\"color: #666\">.</span>add_column(\n    dd<span style=\"color: #666\">.</span>SamplerColumnConfig(\n        name<span style=\"color: #666\">=</span><span style=\"color: #4070A0\">&quot;dog_emotion&quot;</span>,\n        sampler_type<span style=\"color: #666\">=</span>dd<span style=\"color: #666\">.</span>SamplerType<span style=\"color: #666\">.</span>CATEGORY,\n        params<span style=\"color: #666\">=</span>dd<span style=\"color: #666\">.</span>CategorySamplerParams(\n            values<span style=\"color: #666\">=</span>[<span style=\"color: #4070A0\">&quot;happy&quot;</span>, <span style=\"color: #4070A0\">&quot;curious&quot;</span>, <span style=\"color: #4070A0\">&quot;serious&quot;</span>, <span style=\"color: #4070A0\">&quot;sleepy&quot;</span>, <span style=\"color: #4070A0\">&quot;excited&quot;</span>],\n        ),\n    )\n)\n\nconfig_builder<span style=\"color: #666\">.</span>add_column(\n    dd<span style=\"color: #666\">.</span>SamplerColumnConfig(\n        name<span style=\"color: #666\">=</span><span style=\"color: #4070A0\">&quot;cat_emotion&quot;</span>,\n        sampler_type<span style=\"color: #666\">=</span>dd<span style=\"color: #666\">.</span>SamplerType<span style=\"color: #666\">.</span>CATEGORY,\n        params<span style=\"color: #666\">=</span>dd<span style=\"color: #666\">.</span>CategorySamplerParams(\n            values<span style=\"color: #666\">=</span>[<span style=\"color: #4070A0\">&quot;aloof&quot;</span>, <span style=\"color: #4070A0\">&quot;curious&quot;</span>, <span style=\"color: #4070A0\">&quot;content&quot;</span>, <span style=\"color: #4070A0\">&quot;sleepy&quot;</span>, <span style=\"color: #4070A0\">&quot;playful&quot;</span>],\n        ),\n    )\n)\n\nconfig_builder<span style=\"color: #666\">.</span>add_column(\n    dd<span style=\"color: #666\">.</span>ImageColumnConfig(\n        name<span style=\"color: #666\">=</span><span style=\"color: #4070A0\">&quot;generated_image&quot;</span>,\n        prompt<span style=\"color: #666\">=</span>(\n<span style=\"color: #BBB\">            </span><span style=\"color: #4070A0; font-style: italic\">&quot;&quot;&quot;</span>\n<span style=\"color: #4070A0; font-style: italic\">A {{ style }} family pet portrait of a {{ dog_breed }} dog of {{ dog_age }} years old looking {{dog_look_direction}} with an {{ dog_emotion }} expression and</span>\n<span style=\"color: #4070A0; font-style: italic\">{{ cat_breed }} cat of {{ cat_age }} years old looking {{ cat_look_direction }} with an {{ cat_emotion }} expression in the background. Both subjects should be in focus.</span>\n<span style=\"color: #4070A0; font-style: italic\">        &quot;&quot;&quot;</span>\n        ),\n        model_alias<span style=\"color: #666\">=</span>MODEL_ALIAS,\n    )\n)\n\ndata_designer<span style=\"color: #666\">.</span>validate(config_builder)\n"
    },
    {
      "type": "markdown",
      "source": "### \ud83d\udd01 Preview: images as base64\n\nIn **preview** mode, generated images are stored as base64 strings in the dataframe. Run the next cell to step through each record (images are shown in the sample record display, but only in a notebook environment)."
    },
    {
      "type": "code",
      "source": "preview = data_designer.preview(config_builder, num_records=2)",
      "language": "python",
      "source_html": "preview <span style=\"color: #666\">=</span> data_designer<span style=\"color: #666\">.</span>preview(config_builder, num_records<span style=\"color: #666\">=</span><span style=\"color: #40A070\">2</span>)\n"
    },
    {
      "type": "code",
      "source": "for i in range(len(preview.dataset)):\n    preview.display_sample_record()",
      "language": "python",
      "source_html": "<span style=\"color: #007020; font-weight: bold\">for</span> i <span style=\"color: #007020; font-weight: bold\">in</span> <span style=\"color: #007020\">range</span>(<span style=\"color: #007020\">len</span>(preview<span style=\"color: #666\">.</span>dataset)):\n    preview<span style=\"color: #666\">.</span>display_sample_record()\n"
    },
    {
      "type": "code",
      "source": "preview.dataset",
      "language": "python",
      "source_html": "preview<span style=\"color: #666\">.</span>dataset\n"
    },
    {
      "type": "markdown",
      "source": "### \ud83c\udd99 Create: images saved to disk\n\nIn **create** mode, images are written to an `images/` folder with UUID filenames; the dataframe stores relative paths (e.g. `images/1d16b6e2-562f-4f51-91e5-baaa999ea916.png`)."
    },
    {
      "type": "code",
      "source": "results = data_designer.create(config_builder, num_records=2, dataset_name=\"tutorial-5-images\")",
      "language": "python",
      "source_html": "results <span style=\"color: #666\">=</span> data_designer<span style=\"color: #666\">.</span>create(config_builder, num_records<span style=\"color: #666\">=</span><span style=\"color: #40A070\">2</span>, dataset_name<span style=\"color: #666\">=</span><span style=\"color: #4070A0\">&quot;tutorial-5-images&quot;</span>)\n"
    },
    {
      "type": "code",
      "source": "dataset = results.load_dataset()\ndataset.head()",
      "language": "python",
      "source_html": "dataset <span style=\"color: #666\">=</span> results<span style=\"color: #666\">.</span>load_dataset()\ndataset<span style=\"color: #666\">.</span>head()\n"
    },
    {
      "type": "code",
      "source": "# Display all images from the created dataset. Paths are relative to the artifact output directory.\nfor index, row in dataset.iterrows():\n    path_or_list = row.get(\"generated_image\")\n    if path_or_list is not None:\n        paths = path_or_list if not isinstance(path_or_list, str) else [path_or_list]\n        for path in paths:\n            full_path = results.artifact_storage.base_dataset_path / path\n            display(IPImage(filename=str(full_path)))",
      "language": "python",
      "source_html": "<span style=\"color: #60A0B0; font-style: italic\"># Display all images from the created dataset. Paths are relative to the artifact output directory.</span>\n<span style=\"color: #007020; font-weight: bold\">for</span> index, row <span style=\"color: #007020; font-weight: bold\">in</span> dataset<span style=\"color: #666\">.</span>iterrows():\n    path_or_list <span style=\"color: #666\">=</span> row<span style=\"color: #666\">.</span>get(<span style=\"color: #4070A0\">&quot;generated_image&quot;</span>)\n    <span style=\"color: #007020; font-weight: bold\">if</span> path_or_list <span style=\"color: #007020; font-weight: bold\">is</span> <span style=\"color: #007020; font-weight: bold\">not</span> <span style=\"color: #007020; font-weight: bold\">None</span>:\n        paths <span style=\"color: #666\">=</span> path_or_list <span style=\"color: #007020; font-weight: bold\">if</span> <span style=\"color: #007020; font-weight: bold\">not</span> <span style=\"color: #007020\">isinstance</span>(path_or_list, <span style=\"color: #007020\">str</span>) <span style=\"color: #007020; font-weight: bold\">else</span> [path_or_list]\n        <span style=\"color: #007020; font-weight: bold\">for</span> path <span style=\"color: #007020; font-weight: bold\">in</span> paths:\n            full_path <span style=\"color: #666\">=</span> results<span style=\"color: #666\">.</span>artifact_storage<span style=\"color: #666\">.</span>base_dataset_path <span style=\"color: #666\">/</span> path\n            display(IPImage(filename<span style=\"color: #666\">=</span><span style=\"color: #007020\">str</span>(full_path)))\n"
    },
    {
      "type": "markdown",
      "source": "## \u23ed\ufe0f Next steps\n\n- [The basics](https://nvidia-nemo.github.io/DataDesigner/latest/notebooks/1-the-basics/): samplers and LLM text columns\n- [Structured outputs and Jinja](https://nvidia-nemo.github.io/DataDesigner/latest/notebooks/2-structured-outputs-and-jinja-expressions/)\n- [Seeding with a dataset](https://nvidia-nemo.github.io/DataDesigner/latest/notebooks/3-seeding-with-a-dataset/)\n- [Providing images as context](https://nvidia-nemo.github.io/DataDesigner/latest/notebooks/4-providing-images-as-context/)\n- [Image-to-image editing](https://nvidia-nemo.github.io/DataDesigner/latest/notebooks/6-editing-images-with-image-context/): edit existing images with seed datasets"
    }
  ]
}