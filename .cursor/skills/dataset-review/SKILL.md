---
name: dataset-review
description: Launch a browser-based review UI for inspecting and annotating synthetic dataset records. Use when the user wants to review generated data, annotate records as good/bad, or inspect LLM traces from a Data Designer preview run.
---

# Dataset Review

Review synthetic datasets generated by Data Designer in an interactive browser UI.

## Workflow

### 1. Run preview and launch review UI inline

Add the review server launch at the end of the preview script. This saves the parquet and opens the browser in one step:

```python
preview = designer.preview(config_builder)
preview.dataset.to_parquet("preview.parquet")

# Launch review UI (blocks until server is stopped)
from data_designer.web.server import run_server
run_server(data_file="preview.parquet", open_browser=True)
```

Run the script backgrounded so your shell isn't blocked:

```bash
uv run script.py &
```

The browser opens automatically. Tell the user: "I've opened the review UI in your browser. Review the records and annotate any that need improvement. Come back here when you're done."

### 2. Read annotations

When the user returns, read their feedback:

```python
import json
from pathlib import Path

annotations = json.loads(Path("preview_annotations.json").read_text())
```

The annotations file structure:

```json
{
  "source_file": "preview.parquet",
  "summary": {"good": 3, "bad": 2, "unreviewed": 5, "total": 10},
  "annotations": [
    {
      "row": 2,
      "rating": "bad",
      "column": "answer",
      "note": "Answer is factually wrong",
      "data": {"topic": "science", "question": "...", "answer": "..."}
    }
  ]
}
```

Key fields:
- `rating`: "good", "bad", or null
- `column`: which specific column is the problem (null if row-level)
- `note`: free-text explanation from the user
- `data`: the actual row values for context

### 3. Iterate

Use the annotations to guide edits:
- `column` field tells you which prompt/column to fix
- `note` tells you what's wrong
- `data` gives you the actual values for context

After editing the config and re-running preview, overwrite the parquet file and reload the UI:

```bash
curl -X POST http://127.0.0.1:8765/api/session/reload
```

The UI picks up the new data automatically.

### 4. Finish

When the user clicks "Finish Review" in the UI, a summary message is copied to their clipboard. They will paste it into the chat -- it looks like:

> I finished my review. 3 good, 2 bad out of 10 records. Read `preview_annotations.json` for my detailed feedback.

When you see this message, read the annotations file and use it to guide next steps (iterate on the config or run a full `create` job).

## Alternative: CLI launch

If you prefer to launch the review UI separately (e.g. for an existing parquet file):

```bash
uv run --with data-designer data-designer review preview.parquet --open &
```
